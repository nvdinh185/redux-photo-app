(this["webpackJsonpredux-photo-app"]=this["webpackJsonpredux-photo-app"]||[]).push([[0],{115:function(e,t,n){},116:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(25),i=n.n(o),c=n(28),u=n(22),s=n(36),l=n(38),p=n(9),d=n.n(p),m=n(18),h=n(15),f=n.n(h),g={getMe:function(){return new Promise((function(e,t){setTimeout((function(){var t=f.a.auth().currentUser;e({id:t.uid,name:t.displayName,email:t.email,photoUrl:t.photoURL})}),500)}))}},v=n(22),b=v.createSlice,y=(0,v.createAsyncThunk)("user/getMe",function(){var e=Object(m.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getMe();case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x=b({name:"user",initialState:{current:{}},reducers:{},extraReducers:Object(l.a)({},y.fulfilled,(function(e,t){e.current=t.payload}))}).reducer,E={photos:s.b,user:x},k=Object(u.configureStore)({reducer:E}),w=(n(77),n(78),n(56)),I=n(52),O=n.n(I),j=n(53),S=n.n(j),A=function(){var e=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=f.a.auth().currentUser)){e.next=3;break}return e.abrupt("return",t.getIdToken());case 3:if(localStorage.getItem("firebaseui::rememberedAccounts")){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",new Promise((function(e,t){var n=setTimeout((function(){t(null),console.log("Reject timeout")}),1e4),a=f.a.auth().onAuthStateChanged(function(){var r=Object(m.a)(d.a.mark((function r(o){var i;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o||t(null),!o){r.next=9;break}return r.next=4,o.getIdToken();case 4:i=r.sent,console.log("[AXIOS] Logged in user token: ",i),e(i),r.next=11;break;case 9:console.log("Not Login!"),e();case 11:a(),clearTimeout(n);case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=O.a.create({baseURL:"https://js-post-api.herokuapp.com/api",headers:{"content-type":"application/json"},paramsSerializer:function(e){return S.a.stringify(e)}});_.interceptors.request.use(function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return(n=e.sent)&&(t.headers.Authorization="Bearer ".concat(n)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_.interceptors.response.use((function(e){return e&&e.data?e.data:e}),(function(e){throw e}));var P=_,L={getAll:function(e){return P.get("/products",{params:e})},get:function(e){var t="/products/".concat(e);return P.get(t)}},N=n(54),F=n.n(N),U={signInFlow:"redirect",signInSuccessUrl:"/photos",signInOptions:[f.a.auth.GoogleAuthProvider.PROVIDER_ID]};var q=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",null,"Login Form"),r.a.createElement("p",null,"or login with social accounts")),r.a.createElement(F.a,{uiConfig:U,firebaseAuth:f.a.auth()}))},R=n(26),C=n(6),T=n(122),z=(n(115),n(119)),M=n(120),B=n(121);n(116);var D=function(){return r.a.createElement("header",{className:"header"},r.a.createElement(z.a,null,r.a.createElement(M.a,{className:"justify-content-between"},r.a.createElement(B.a,{xs:"auto"},r.a.createElement("a",{className:"header__link header__title",href:"https://youtube.com/easyfrontend",target:"_blank",rel:"noopener noreferrer"},"Easy Frontend")),r.a.createElement(B.a,{xs:"auto"},r.a.createElement(R.c,{exact:!0,className:"header__link",to:"/sign-in",activeClassName:"header__link--active"},"Sign In")))))},K=n(49),G=r.a.lazy((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,193))}));f.a.initializeApp({apiKey:"AIzaSyB3FtOQKw_OKjif72Qla2IsG9nek1O71PI",authDomain:"redux-photo-app-ea6ce.firebaseapp.com"});var J=function(){var e=Object(a.useState)([]),t=Object(w.a)(e,2),n=(t[0],t[1]),o=Object(c.b)();Object(a.useEffect)((function(){(function(){var e=Object(m.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={_page:1,_limit:10},console.log(123),e.next=5,L.getAll(t);case 5:a=e.sent,console.log(a),n(a.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Failed to fetch product list: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){var e=f.a.auth().onAuthStateChanged(function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.log("User is not logged in"),e.abrupt("return");case 3:return e.prev=3,e.next=6,o(y());case 6:n=e.sent,a=Object(u.unwrapResult)(n),console.log("Logged in user: ",a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("Failed to login ",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[]);var i=function(){var e=Object(m.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={_page:1,_limit:10},e.next=4,L.getAll(t);case 4:n=e.sent,console.log(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Failed to fetch product list: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"photo-app"},r.a.createElement("button",{onClick:function(){f.a.auth().signOut().then((function(e){console.log("Sign-out successful",e)}),(function(e){console.log("An error happened")}))}},"Logout"),r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading ...")},r.a.createElement(R.a,null,r.a.createElement(D,null),r.a.createElement(T.a,{onClick:i},"Fetch Product List"),r.a.createElement(C.d,null,r.a.createElement(C.a,{exact:!0,from:"/",to:"/photos"}),r.a.createElement(C.b,{path:"/photos",component:G}),r.a.createElement(C.b,{path:"/sign-in",component:q}),r.a.createElement(C.b,{component:K.a})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{store:k},r.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return s}));var a=n(22),r=Object(a.createSlice)({name:"photos",initialState:[{id:91176,categoryId:5,photo:"https://picsum.photos/id/532/300/300",title:"Enim laboris dolore consectetur et fugiat do amet eiusmod anim proident do culpa irure consectetur."},{id:82605,categoryId:1,photo:"https://picsum.photos/id/43/300/300",title:"Ad officia magna veniam sunt."},{id:74760,categoryId:3,photo:"https://picsum.photos/id/722/300/300",title:"Minim anim in sunt esse nisi sit magna consequat in sit laboris adipisicing."},{id:39588,categoryId:5,photo:"https://picsum.photos/id/294/300/300",title:"Deserunt in tempor est id consectetur cupidatat."},{id:72133,categoryId:4,photo:"https://picsum.photos/id/229/300/300",title:"Labore culpa velit sunt sit anim ad do veniam do proident sunt et nisi mollit."},{id:95333,categoryId:1,photo:"https://picsum.photos/id/862/300/300",title:"Fugiat fugiat voluptate tempor minim ipsum nisi culpa magna officia ea deserunt tempor."},{id:62419,categoryId:3,photo:"https://picsum.photos/id/515/300/300",title:"Excepteur nisi aliquip ex aliqua consectetur id laboris cillum elit dolor dolor anim sint."},{id:12569,categoryId:5,photo:"https://picsum.photos/id/730/300/300",title:"Occaecat exercitation Lorem cupidatat adipisicing elit duis consequat esse et tempor eu enim cupidatat."},{id:47434,categoryId:3,photo:"https://picsum.photos/id/287/300/300",title:"Veniam officia est nulla proident labore."},{id:52685,categoryId:3,photo:"https://picsum.photos/id/859/300/300",title:"Ut incididunt do magna culpa consectetur id deserunt et enim elit quis."},{id:69928,categoryId:5,photo:"https://picsum.photos/id/110/300/300",title:"Nisi velit fugiat voluptate fugiat magna officia qui fugiat ad non."},{id:86160,categoryId:5,photo:"https://picsum.photos/id/649/300/300",title:"Id ex enim non dolore reprehenderit eu ullamco."}],reducers:{addPhoto:function(e,t){e.push(t.payload)},removePhoto:function(e,t){console.log(t.payload);var n=t.payload;return e.filter((function(e){return e.id!==n}))},updatePhoto:function(e,t){var n=t.payload,a=e.findIndex((function(e){return e.id===n.id}));a>=0&&(e[a]=n)}}}),o=r.reducer,i=r.actions,c=i.addPhoto,u=i.removePhoto,s=i.updatePhoto;t.b=o},49:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(){return r.a.createElement("div",null,"Oopss ... Not found")}},59:function(e,t,n){e.exports=n(118)},78:function(e,t,n){}},[[59,1,2]]]);
//# sourceMappingURL=main.26ac84ac.chunk.js.map